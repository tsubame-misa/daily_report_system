<% report ||= @report %> 
<% form_class ||= '' %>
<% context ||= :user %> 

<% form_url = (context == :admin) ? [:admin, report] : report %>
<% cancel_path = if report.persisted? %>
  <% (context == :admin) ? admin_report_path(report) : report_path(report) %>
<% else %>
  <% (context == :admin) ? admin_calendar_month_path : calendar_month_path %>
<% end %>

<%= form_with model: report, url: form_url, local: true, html: { class: form_class } do |form| %>
  <div class="mb-4">
    <div class="d-flex align-items-center mb-2">
      <%= form.label :report_date, '日付', class: "form-label me-2 mb-0 fw-bold" %>
      <%= form.date_field :report_date, value: (report.report_date || Date.today), class: "form-control form-control-lg w-auto" %>
    </div>
  </div>

  <div class="mb-3">
    <%= form.label :title, 'タイトル', class: "form-label fw-bold" %>
    <%= form.text_field :title, class: "form-control form-control-lg", placeholder: "タイトルを入力してください" %>
  </div>

  <hr class="my-4">

  <div class="mb-4">
    <%= form.label :contents, '内容', class: "form-label fw-bold" %>
    <%= form.text_area :contents, class: "form-control", rows: 10, placeholder: "今日の業務内容を入力してください。" %>
  </div>

  <div class="d-flex justify-content-end gap-3 mt-5">
    <%= render 'share/bootstrap_dark_button',
      text: 'キャンセル',
      path: cancel_path, 
      size_class: 'btn-lg',
      extra_classes: 'custom-dark-button'
    %>

    <% submit_text = report.persisted? ? '更新' : '登録' %>
    <div class="btn custom-dark-button btn-lg">
      <%= form.submit submit_text, class: "text-white border-0 bg-transparent p-0" %>
    </div>
  </div>
<% end %>
