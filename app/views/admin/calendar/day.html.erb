<div class="mb-1">
<div class="mb-3">
  <%= render 'layouts/calendar_tab' %>
</div>


  <div class="d-flex justify-content-between align-items-baseline">
    <h1 class="fs-2 mb-0">
      <%= current_user.admin? ? "日報一覧(day)" : "日報一覧" %>
    </h1>
    <%= link_to new_report_path, class: "btn btn-primary" do %>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-1" viewBox="0 0 24 24"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      新規作成
    <% end %>
  </div>
  <%= render_search_bar(path: reports_path) %>

  <div class="d-flex align-items-baseline justify-content-between my-2">
  <% prev_date = (@selected_date - 1.day).strftime("%Y-%m-%d") %>
  <% next_date = (@selected_date + 1.day).strftime("%Y-%m-%d") %>
  <% today = Date.today.strftime("%Y-%m-%d") %>

  <div class="d-flex align-items-baseline">
    <%= link_to "← 前日", admin_calendar_day_path(date: prev_date), class: "btn btn-outline-primary me-2 btn-calendar-nav" %>
    <%= link_to "今日", admin_calendar_day_path(date: today), class: "btn btn-primary btn-calendar-nav" %>
  </div>

  <span class="fs-4 fw-bold text-primary">
    <%= @selected_date.strftime("%Y年%m月%d日") %>
  </span>

  <div class="d-flex align-items-baseline">
    <%= link_to "翌日 →",admin_calendar_day_path(date: next_date), class: "btn btn-outline-primary btn-calendar-nav" %>
  </div>
</div>



  <div class="container-fluid p-0 mt-2">
    <% if @reports.any? %>
      <% @reports.each do |report| %>
        <div class="card report-card table-card text-decoration-none text-dark report-card-link" data-href="<%= admin_report_path(report) %>" style="cursor:pointer; position:relative;">
          <div class="card-body">
            <div class="report-content">
              <p class="report-author mb-1"><i class="bi bi-person me-1"></i><%= report.user&.name %></p>
              <h5 class="report-title mb-1"><%= report.title %></h5>
              <p class="report-contents mb-0"><%= truncate(report.contents, length: 50) %></p>
            </div>
            <div class="d-flex flex-column align-items-end justify-content-between ms-3" style="min-width:110px;">
              <div class="report-time mb-2"><i class="bi bi-clock me-1"></i><%= report.created_at.strftime("%H:%M") %></div>
              <div class="card-actions">
                <div>
                  <%= render partial: "reports/favorite", locals: { report: report, favorite: report.favorites.find_by(user_id: current_user.id) } %>
                </div>
                <%= link_to "詳細", admin_report_path(report), class: "btn btn-outline-primary btn-sm", onclick: "event.stopPropagation();" %>
                <%= button_to "削除", report_path(report), method: :delete, data: { turbo_confirm: "本当に削除しますか？" }, class: "btn btn-outline-danger btn-sm", form: { style: 'display:inline-block;', onclick: 'event.stopPropagation();' } %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="alert-report-empty" role="alert">
        <i class="bi bi-journal-x me-2"></i>レポートはありません
      </div>
    <% end %>
  </div>
