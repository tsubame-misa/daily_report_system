<!-- 📅 カレンダー表示 -->
<table class="calendar">
  <thead>
    <tr>
      <% %w[日 月 火 水 木 金 土].each do |day| %>
        <th><%= day %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @dates.each do |week| %>
      <tr>
        <% week.each do |date| %>
          <td class="<%= 'outside-month' if date.month != @selected_month %>">
            <div class="date-label">
              <%= link_to date.day, defined?(admin_calendar_day_path) ? admin_calendar_day_path(date: date.strftime('%Y-%m-%d')) : calendar_day_path(date: date.strftime('%Y-%m-%d')), class: "text-decoration-none text-dark" %>
            </div>
            <div class="report-list">
              <% @reports_by_date[date]&.each do |report| %>
                <div class="report-item">
                  <%= link_to defined?(admin_report_path) ? admin_report_path(report) : report_path(report), class: "d-flex align-items-center gap-1" do %>
                    <% if defined?(current_user) && report.favorites.exists?(user_id: current_user.id) %>
                      <i class="bi bi-heart-fill"></i>
                    <% else %>
                      <i class="bi bi-heart"></i>
                    <% end %>
                    <span><%= report.user.name %></span>
                  <% end %>
                </div>
              <% end %>
            </div>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
